<br>
<h2 class="text-center mb-4">AVISO DE SAÍDA – NAVEGAÇÃO INTERIOR</h2>
<div class="card">
    <div class="card-body">
        <form class="row gx-3 gy-2 align-items-center" action="avisoSaida" method="POST">
            <input type="hidden" name="usuarioID" value="%= req.user._id %">
                <div class="input-group mb-3">
                    <label class="input-group-text" class="input-group-text">N° Pocesso de Despacho</label>
                    <input name="saidaNprocesso" class="form-control" type="text">
                </div>
                <div>
                    <h4 class="text-center">Dados da Partida</h4>
                    <div class="input-group mb-3">
                        <label class="input-group-text">Porto de Saída</label>
                        <input name="saidaPortoSaida" class="form-control" type="text">
                        <label class="input-group-text">Data/Hora de Saída</label>
                        <input name="saidaDataHoraSaida" class="form-control" type="text">
                    </div>
                    <div class="input-group mb-3">
                        <label class="input-group-text">Porto de Destino</label>
                        <input name="saidaPortoDestino" class="form-control" type="text">
                        <label class="input-group-text">Data/Hora Estimada de Chegada</label>
                        <input name="saidaDataHoraChegada" class="form-control" type="text">
                    </div>
                    <h4 class="text-center">Dados do Representante da Embarcação</h4>
                    <div class="input-group mb-3">
                        <label class="input-group-text">Nome</label>
                        <input name="saidaNomeRepresentanteEmbarcacao" class="form-control" type="text">
                    </div>
                    <div class="input-group mb-3">
                        <label class="input-group-text">CPF/CNPJ</label>
                        <input name="saidaCPFCNPJRepresentanteEmbarcacao" class="form-control" type="text">
                        <label class="input-group-text">Telefone</label>
                        <input name="saidaTelefoneRepresentanteEmbarcacao" class="form-control" type="text">
                    </div>
                    <div class="input-group mb-3">
                        <label class="input-group-text">Endereço</label>
                        <input name="saidaEnderecoRepresentanteEmbarcacao" class="form-control" type="text">
                        <label class="input-group-text">Email</label>
                        <input name="saidaEmailRepresentanteEmbarcacao" class="form-control" type="text">
                    </div>
                </div>
                <div>
                    <h4 class="text-center">Observações</h4>
                    <div class="input-group mb-3">
                        <input name="saidaObservacoes" class="form-control" type="text">
                    </div>
                </div>

                                            <div>
            <div id="tripulantes" class="card bg-secondary">
                    <script>
                        var tripulantesArray = []
                        function addInputSelect(divName) {
                        var newdiv = document.createElement('div');
                        newdiv.innerHTML = '<select onclick="getId()" name="tripulantesSelect" class="form-select">{{#each tripulantes}}<option value="{{_id}}">{{tripulanteNome}}</option>{{/each}}</select>';
                        document.getElementById(divName).appendChild(newdiv);
                        }
                        addInputSelect('lines');
                        function getId(){
                        tripulantesArray = []
                        var tripulantesIds = document.querySelectorAll("[name='tripulantesSelect'] option:checked")
                        for (var i = 0; i < tripulantesIds.length; i++) {
                            tripulantesArray.push(tripulantesIds[i].value)
                            console.log('foi')
                            document.getElementById('tripulantesArrayIds').setAttribute('value', `${tripulantesArray}`)
                        }
                        console.log(tripulantesArray)
                        }
                    </script>
                </div>
                <input value="" id="tripulantesArrayIds" name="despachoTripulantes" hidden>
                <button class="btn btn-primary" type="button" onclick="addInputSelect('tripulantes')">Adicionar tripulante</button>
            </div>
                <div>
                    <div id="passageiros" class="card bg-secondary">
                        <h4 class="text-center">Lista de Passageiros</h4>
                        <script>
                            var passageiros = 1;
                        function addInputpassageiros(divName) {
                        var newdiv = document.createElement('div');
                        newdiv.innerHTML  = 'Passageiros : ['+passageiros +']';
                        newdiv.innerHTML += '<label class="input-group-text">Nome completo</label>'
                        newdiv.innerHTML += '<input name="saidaPassageirosNome" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">Data de nascimento</label>'
                        newdiv.innerHTML += '<input name="saidaPassageirosDataNascimento" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">Sexo</label>'
                        newdiv.innerHTML += '<input name="saidaPassageirosSexo" class="form-control" type="text">'

                        document.getElementById(divName).appendChild(newdiv);
                        passageiros++;
                        }

                        addInputpassageiros('lines');

                        </script>
                        </div>
                        <button class="btn btn-primary" type="button" onclick="addInputpassageiros('passageiros')">Adicioanar passageiro</button>
                    </div>
                    <div class="input-group mb-3">
                    <label class="input-group-text">Somatório de Passageiros</label>
                    <input name="saidaSomaPassageiros" class="form-control" type="number">
                </div>
                    <div>
                    <div id="comboios" class="card bg-secondary">
                        <h4 class="text-center">Lista de Comboios</h4>
                        <script>
                            var comboios = 1;
                        function addInputcomboios(divName) {
                        var newdiv = document.createElement('div');
                        newdiv.innerHTML  = 'Comboios : ['+comboios +']';
                        newdiv.innerHTML += '<label class="input-group-text">Nome da embarcação</label>'
                        newdiv.innerHTML += '<input name="saidaComboiosNome" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">N° de inscrição</label>'
                        newdiv.innerHTML += '<input name="saidaComboiosNIncricao" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">Arqueação bruta</label>'
                        newdiv.innerHTML += '<input name="saidaComboiosArqueacaoBruta" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">carga</label>'
                        newdiv.innerHTML += '<input name="saidaComboiosCarga" class="form-control" type="text">'
                        newdiv.innerHTML += '<label class="input-group-text">quantidade e unidade de carga</label>'
                        newdiv.innerHTML += '<input name="saidaComboiosQuantidadeCarga" class="form-control" type="text">'

                        document.getElementById(divName).appendChild(newdiv);
                        comboios++;
                        }

                        addInputcomboios('lines');

                        </script>
                    </div>
                    <button class="btn btn-primary" type="button" onclick="addInputcomboios('comboios')">Adicioanar comboio</button>
                    </div>
                <div>
                    <label class="input-group-text">Estou ciente de que responderei administrativa, 
                        civil e penalmente pelos 
                        eventuais dados incorretos constantes da presente declaração</label>
                </div>
                <div>
                    <select name="embarcacao" class="form-select">
                        {{#each embarcacoes}}
                            <option value="{{_id}}">{{embarcacaoNome}}</option>
                        {{else}}
                            <option value="0">Nenhuma embarcação cadastrada</option>
                        {{/each}}
                    </select>
                </div>
                <br>
                <button type="submit" class="btn btn-success" required>Enviar</button>
        </form>
    </div>
</div>